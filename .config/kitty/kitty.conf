# Couleurs via pywal (générées par generate-kitty-colors)
include ~/.config/kitty/colors.conf

# ── Police ───────────────────────────────────────────
font_family        JetBrainsMono Nerd Font
bold_font          auto
italic_font        auto
bold_italic_font   auto
font_size          15.0
font_features      +liga,+calt   # ligatures

# ── Curseur ──────────────────────────────────────────
# Allowed values: block, beam, underline
cursor_shape beam
cursor_blink_interval 0.45
cursor_stop_blinking_after 0
cursor_trail 22
cursor_trail_decay 0.08 0.68
cursor_beam_thickness 0.6
cursor_underline_thickness 2.0
cursor_color #ffffff
cursor_text_color #000000
cursor_blink yes

# ── Fenêtre ──────────────────────────────────────────
window_padding_width   12
background_opacity     0.85
background_blur        15
# Toggle rapide en noir opaque (1.0) ou translucide (0.85)
map ctrl+shift+o launch --type=overlay --hold sh -c \
'kitty @ set-background-opacity $(kitty @ ls 2>/dev/null | jq -r \"max(.[]?.config.background_opacity // 0)\" | python - <<\"PY\"\nimport sys\nv=float(sys.stdin.read() or 0)\nprint(1.0 if v<0.9 else 0.85)\nPY)'


# ── Scrollback ───────────────────────────────────────
scrollback_lines 12000
wheel_scroll_multiplier 3.0
touch_scroll_multiplier 2.0

# ── Bell (silencieux) ────────────────────────────────
enable_audio_bell no
visual_bell_duration 0

# ── Performance ──────────────────────────────────────
repaint_delay 7
input_delay   2
sync_to_monitor yes
glsl_shaders none

# ── Raccourcis utiles ───────────────────────────────
# Taille police
map ctrl+shift+equal change_font_size all +1.0
map ctrl+shift+minus change_font_size all -1.0
map ctrl+shift+0     change_font_size all 0


# Onglets
map ctrl+t           new_tab_with_cwd
map ctrl+w           close_tab
map ctrl+tab         next_tab
map ctrl+shift+tab   previous_tab
map alt+1            goto_tab 1
map alt+2            goto_tab 2
map alt+3            goto_tab 3
map alt+4            goto_tab 4
map alt+5            goto_tab 5
map alt+6            goto_tab 6
map alt+7            goto_tab 7
map alt+8            goto_tab 8
map alt+9            goto_tab 9

# Split panes
map ctrl+shift+d     new_window_with_cwd
map ctrl+shift+h launch --location=hsplit --cwd=current
map ctrl+shift+v launch --location=vsplit --cwd=current
map alt+h            neighboring_window left
map alt+l            neighboring_window right
map alt+k            neighboring_window up
map alt+j            neighboring_window down
map alt+shift+h      move_window left
map alt+shift+l      move_window right
map alt+shift+k      move_window up
map alt+shift+j      move_window down
map ctrl+shift+up    resize_window taller
map ctrl+shift+down  resize_window shorter
map ctrl+shift+left  resize_window wider
map ctrl+shift+right resize_window narrower

# Copier/coller 
map ctrl+shift+c copy_to_clipboard
map ctrl+shift+v paste_from_clipboard

# Souris
mouse_map middle click ungrabbed paste_from_clipboard
mouse_map right click ungrabbed copy_to_clipboard

# Zoom avec molette
mouse_map ctrl+scroll_up change_font_size all +1.0
mouse_map ctrl+scroll_down change_font_size all -1.0

# Ctrl+clic pour ouvrir liens/fichiers
mouse_map ctrl+left click grabbed mouse_handle_click selection link prompt
mouse_map ctrl+left click ungrabbed mouse_handle_click selection link prompt

# ── Bonus modernité ──────────────────────────────────
# Recherche dans le buffer
map ctrl+shift+f search_forward
map ctrl+shift+g search_backward

# Plein écran toggle
map ctrl+shift+f11 toggle_fullscreen
