################################################################################
###                    GESTION DES FENÊTRES ET WORKSPACES                   ###
################################################################################
# Règles pour les fenêtres et organisation des espaces de travail
# Documentation : https://wiki.hyprland.org/Configuring/Window-Rules/
################################################################################

############################
### 1. Garde-fous globaux ###
############################
windowrule = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0

############################
### 2. Routage workspaces ###
############################
# --- 2.1 Placements obligatoires ---
windowrulev2 = workspace 9 silent, class:^(teams-for-linux|com.github.IsmaelMartinez.teams_for_linux)$

# --- 2.2 Workspaces predefinis ---
windowrulev2 = workspace 3 silent, class:^(discord|vesktop)$
windowrulev2 = workspace 6 silent, class:^(obsidian|org.pwmt.zathura|zathura)$
windowrulev2 = workspace 7 silent, class:^(VirtualBox|VirtualBox Machine)$
windowrulev2 = workspace 7 silent, class:^(packettracer|PacketTracer)$
windowrulev2 = workspace 8 silent, class:^(librewolf)$
windowrulev2 = workspace 8 silent, title:.*Outlook.*
windowrulev2 = workspace 8 silent, title:.*NetYpareo.*

# --- 2.3 Scratchpad ---
# Le workspace spécial reste libre : pas de règle globale

############################
### 3. Profils visuels    ###
############################
# --- 3.1 Gestionnaire de fichiers ---
windowrulev2 = opacity 0.66 0.56, class:^(Thunar|thunar)$
windowrulev2 = float, class:^(Thunar|thunar)$
windowrulev2 = size 900 600, class:^(Thunar|thunar)$
windowrulev2 = center, class:^(Thunar|thunar)$

# --- 3.2 Terminal ---
# Kitty gère sa transparence via Pywal/kitty.conf

# --- 3.3 Multimédia & communication ---
windowrulev2 = opacity 0.75 0.65, class:^(spotify|Spotify|com\.spotify\.Client)$
windowrulev2 = opacity 0.75 0.60, class:^(discord|teams-for-linux|com.github.IsmaelMartinez.teams_for_linux|teams|Microsoft Teams)$
windowrulev2 = opacity 0.75 0.60, class:^(vesktop)$

# --- 3.4 Navigateurs ---
# Fenêtres quasi opaques mais avec un léger voile (lecture claire + flou)
windowrulev2 = opacity 0.70 0.60, class:^(firefox|librewolf|zen)$
windowrulev2 = noshadow, class:^(firefox|librewolf|zen)$

# --- 3.5 Productivité ---
windowrulev2 = opacity 0.70 0.60, class:^(obsidian)$

# --- 3.6 Développement ---
windowrulev2 = opacity 0.70 0.60, class:^(Codium|codium|VSCodium)$

############################
### 4. Contraintes        ###
############################
# --- 4.1 VM & labos réseau ---
windowrulev2 = suppressevent maximize, class:^(VirtualBox|VirtualBox Machine)$
windowrulev2 = suppressevent maximize, class:^(packettracer|PacketTracer)$

# --- 4.2 Outils de communication ---
windowrulev2 = suppressevent maximize, class:^(teams|Microsoft Teams|teams-for-linux|com.github.IsmaelMartinez.teams_for_linux)$

# --- 4.3 IDEs ---
windowrulev2 = suppressevent maximize, class:^(Codium|codium|VSCodium)$
windowrulev2 = suppressevent fullscreen, class:^(Codium|codium|VSCodium)$

# --- 4.4 Plein écran global ---
windowrulev2 = noblur, fullscreen:1
windowrulev2 = noshadow, fullscreen:1
windowrulev2 = noborder, fullscreen:1

############################
### 5. Fenêtres flottantes ###
############################
# --- 5.1 Waypaper & Spotify ---
windowrulev2 = float, class:^(waypaper)$
windowrulev2 = size 900 600, class:^(waypaper)$
windowrulev2 = center, class:^(waypaper)$
windowrulev2 = opacity 0.75 0.60, class:^(waypaper)$

# --- 5.2  GTK ---
windowrulev2 = float, title:.*(Open|Save|Enregistrer|Ouvrir|Choose|Select|Exporter|Importer).*
windowrulev2 = center, title:.*(Open|Save|Enregistrer|Ouvrir|Choose|Select|Exporter|Importer).*
windowrulev2 = opacity 1.0 1.0, title:.*(Open|Save|Enregistrer|Ouvrir|Choose|Select|Exporter|Importer).*
windowrulev2 = float, class:^(xdg-desktop-portal-gtk)$
windowrulev2 = center, class:^(xdg-desktop-portal-gtk)$

#  Firefox/Librewolf
windowrulev2 = float, class:^(firefox|librewolf)$, title:(?i).*(import|importer).*
windowrulev2 = center, class:^(firefox|librewolf)$, title:(?i).*(import|importer).*
windowrulev2 = opacity 0.95 0.85, class:^(firefox|librewolf)$, title:(?i).*(import|importer).*

# --- 5.3 Sélecteurs Zenity ---
windowrulev2 = float, class:^(zenity)$
windowrulev2 = size 600 450, class:^(zenity)$
windowrulev2 = center, class:^(zenity)$
windowrulev2 = opacity 0.75 0.60, class:^(zenity)$
windowrulev2 = float, title:^(Sélectionner).*$
windowrulev2 = size 550 400, title:^(Sélectionner).*$
windowrulev2 = center, title:^(Sélectionner).*$

# --- 5.4 Gestion du son ---
windowrulev2 = float, class:^(pavucontrol|org.pulseaudio.pavucontrol)$
windowrulev2 = size 500 400, class:^(pavucontrol|org.pulseaudio.pavucontrol)$
windowrulev2 = center, class:^(pavucontrol|org.pulseaudio.pavucontrol)$
windowrulev2 = opacity 0.75 0.60, class:^(org.pulseaudio.pavucontrol)$
windowrulev2 = size 500 400, title:^(.*[Vv]olume.*)$
windowrulev2 = center, title:^(.*[Vv]olume.*)$
windowrulev2 = float, title:^(.*[Vv]olume.*)$

# --- 5.5 Réseaux & périphériques ---
windowrulev2 = float, class:^(blueman-manager)$
windowrulev2 = size 600 400, class:^(blueman-manager)$
windowrulev2 = center, class:^(blueman-manager)$
windowrulev2 = opacity 0.55 0.45, class:^(blueman-manager)$
windowrulev2 = float, class:^(nm-connection-editor)$
windowrulev2 = opacity 0.75 0.60, class:^(nm-connection-editor)$

# --- 5.6 Outils système ---
windowrulev2 = float, class:^(xarchiver)$
windowrulev2 = opacity 0.75 0.60, class:^(xarchiver)$
windowrulev2 = float, class:^([Gg]alculator)$
windowrulev2 = size 350 450, class:^(Galculator)$
windowrulev2 = center, class:^(Galculator)$
windowrulev2 = opacity 0.75 0.60, class:^(Galculator)$
windowrulev2 = float, class:^(mousepad)$
windowrulev2 = size 700 500, class:^(mousepad)$
windowrulev2 = center, class:^(mousepad)$
windowrulev2 = opacity 0.70 0.60, class:^(mousepad)$
windowrulev2 = float, class:^([Ll]ocal[Ss]end)$
windowrulev2 = float, class:^(Localsend)$
windowrulev2 = size 800 600, class:^(Localsend)$
windowrulev2 = center, class:^(Localsend)$
windowrulev2 = opacity 0.75 0.60, class:^(Localsend)$
windowrulev2 = size 800 600, title:^(.*LocalSend.*)$
windowrulev2 = center, title:^(.*LocalSend.*)$
windowrulev2 = float, title:^(.*LocalSend.*)$

# --- 5.7 Apps spécialisées ---
windowrulev2 = float, class:^(com\.github\.hluk\.copyq|[Cc]opy[Qq])$
windowrulev2 = size 700 420, class:^(com\.github\.hluk\.copyq|[Cc]opy[Qq])$
windowrulev2 = center, class:^(com\.github\.hluk\.copyq|[Cc]opy[Qq])$
windowrulev2 = float, class:^(protonvpn-app)$
windowrulev2 = size 500 600, class:^(protonvpn-app)$
windowrulev2 = center, class:^(protonvpn-app)$
windowrulev2 = opacity 0.95 0.85, class:^(protonvpn-app)$
windowrulev2 = float, class:^(Proton Pass)$
windowrulev2 = size 1403 894, class:^(Proton Pass)$
windowrulev2 = center, class:^(Proton Pass)$
windowrulev2 = opacity 0.75 0.60, class:^(Proton Pass)$
windowrulev2 = float, class:^(veracrypt)$
windowrulev2 = size 700 500, class:^(veracrypt)$
windowrulev2 = center, class:^(veracrypt)$
windowrulev2 = opacity 0.75 0.60, class:^(veracrypt)$
windowrulev2 = float, class:^(kvantummanager)$
windowrulev2 = size 600 500, class:^(kvantummanager)$
windowrulev2 = center, class:^(kvantummanager)$
windowrulev2 = opacity 0.75 0.60, class:^(kvantummanager)$
windowrulev2 = float, class:^(org.qbittorrent.qBittorrent)$
windowrulev2 = size 900 600, class:^(org.qbittorrent.qBittorrent)$
windowrulev2 = center, class:^(org.qbittorrent.qBittorrent)$
windowrulev2 = opacity 0.75 0.60, class:^(org.qbittorrent.qBittorrent)$
windowrulev2 = float, class:^(GalaxyBudsClient)$
windowrulev2 = float, class:.*GalaxyBuds.*
windowrulev2 = size 600 500, class:^(GalaxyBudsClient)$
windowrulev2 = center, class:^(GalaxyBudsClient)$
windowrulev2 = opacity 0.95 0.85, class:^(GalaxyBudsClient)$
windowrulev2 = float, class:^(dupot_easy_flatpak)$
windowrulev2 = size 700 500, class:^(dupot_easy_flatpak)$
windowrulev2 = center, class:^(dupot_easy_flatpak)$
windowrulev2 = opacity 0.95 0.85, class:^(dupot_easy_flatpak)$
windowrulev2 = float, class:^([Nn]wg-look)$
windowrulev2 = size 900 600, class:^([Nn]wg-look)$
windowrulev2 = center, class:^([Nn]wg-look)$
windowrulev2 = opacity 0.95 0.85, class:^([Nn]wg-look)$

############################
### 6. Couches layer-shell ###
############################
# Applique un effet opaque (wlogout)
layerrule = blur, wlogout
layerrule = ignorealpha 0.05, wlogout
