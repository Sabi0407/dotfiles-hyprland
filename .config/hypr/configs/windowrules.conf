################################################################################
###                    GESTION DES FENÊTRES ET WORKSPACES                   ###
################################################################################
# Règles pour les fenêtres et organisation des espaces de travail
# Documentation : https://wiki.hyprland.org/Configuring/Window-Rules/
################################################################################

# ═══════════════════════════════════════════════════════════════════════════════
# RÈGLES DE SÉCURITÉ ET STABILITÉ
# ═══════════════════════════════════════════════════════════════════════════════

# Empêche les applications de forcer la maximisation
windowrulev2 = suppressevent maximize, class:(.*)

# Corrige les bugs de glisser-déposer avec XWayland
windowrule = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0

# RÈGLES DE WORKSPACE PRIORITAIRES (doivent être en premier)
# Zathura - Force l'ouverture sur workspace 6 pour les cours
windowrulev2 = workspace 6 silent, class:^(zathura)$
# Evince - Force l'ouverture sur workspace 6 pour les cours
windowrulev2 = workspace 6 silent, class:^(org.gnome.Evince)$
# Teams-for-linux (Flatpak) - Force l'ouverture sur workspace 9 pour les cours
windowrulev2 = workspace 9 silent, class:^(teams-for-linux)$
windowrulev2 = workspace 9 silent, class:^(com.github.IsmaelMartinez.teams_for_linux)$

# ═══════════════════════════════════════════════════════════════════════════════
# DÉSACTIVER LES DÉCORATIONS CÔTÉ CLIENT (BOUTONS FERMER/MINIMISER/MAXIMISER)
# ═══════════════════════════════════════════════════════════════════════════════

# Les décorations sont désactivées via la configuration générale dans look.conf

# ═══════════════════════════════════════════════════════════════════════════════
# TRANSPARENCE ET EFFETS VISUELS PAR APPLICATION
# ═══════════════════════════════════════════════════════════════════════════════

# Gestionnaire de fichiers Thunar : transparence avec flou comme Kitty
windowrulev2 = opacity 0.55 0.45, class:^(Thunar|thunar)$
windowrulev2 = float, class:^(Thunar|thunar)$
windowrulev2 = size 900 600, class:^(Thunar|thunar)$
windowrulev2 = center, class:^(Thunar|thunar)$
windowrulev2 = float, initialclass:^(Thunar|thunar)$
windowrulev2 = size 900 600, initialclass:^(Thunar|thunar)$
windowrulev2 = center, initialclass:^(Thunar|thunar)$
# Applications multimédia
windowrulev2 = opacity 0.75 0.65, class:^(Spotify)$

# Terminal avec légère transparence
windowrulev2 = opacity 0.66 0.56, class:^(kitty)$
windowrulev2 = noshadow, class:^(kitty)$

# Applications de communication
windowrulev2 = opacity 0.75 0.60, class:^(discord)$
windowrulev2 = opacity 0.75 0.60, class:^(teams-for-linux)$
windowrulev2 = opacity 0.75 0.60, class:^(com.github.IsmaelMartinez.teams_for_linux)$
windowrulev2 = opacity 0.75 0.60, class:^(teams)$
windowrulev2 = opacity 0.75 0.60, class:^(Microsoft Teams)$

# Navigateurs web (transparence harmonisée)
windowrulev2 = opacity 0.98 0.92, class:^(firefox)$
windowrulev2 = noblur, class:^(firefox)$
windowrulev2 = noshadow, class:^(firefox)$
windowrulev2 = opacity 0.98 0.92, class:^(librewolf)$
windowrulev2 = noblur, class:^(librewolf)$
windowrulev2 = noshadow, class:^(librewolf)$

# Applications de productivité
windowrulev2 = opacity 0.70 0.60, class:^(obsidian)$

# Editeurs de code et IDEs
windowrulev2 = opacity 0.70 0.60, class:^(Codium|codium|VSCodium)$
windowrulev2 = opacity 0.70 0.60, class:^(code|Code)$
windowrulev2 = opacity 0.70 0.60, class:^(cursor)$

# Lecteur PDF Evince
windowrulev2 = opacity 0.70 0.60, class:^(org.gnome.Evince|evince)$



# Zathura - Lecteur PDF pour les cours
windowrulev2 = suppressevent maximize, class:^(zathura)$
windowrulev2 = suppressevent fullscreen, class:^(zathura)$

# Evince - Lecteur PDF pour les cours
windowrulev2 = suppressevent maximize, class:^(org.gnome.Evince)$
windowrulev2 = suppressevent fullscreen, class:^(org.gnome.Evince)$

# VirtualBox - Laboratoire virtuel
windowrulev2 = suppressevent maximize, class:^(VirtualBox)$
windowrulev2 = suppressevent maximize, class:^(VirtualBox Machine)$

# PacketTracer - Simulation réseau
windowrulev2 = suppressevent maximize, class:^(packettracer)$
windowrulev2 = suppressevent maximize, class:^(PacketTracer)$

# Teams - Communication cours (Flatpak)
windowrulev2 = suppressevent maximize, class:^(teams)$
windowrulev2 = suppressevent maximize, class:^(Microsoft Teams)$
windowrulev2 = suppressevent maximize, class:^(teams-for-linux)$
windowrulev2 = suppressevent maximize, class:^(com.github.IsmaelMartinez.teams_for_linux)$

# IDEs - Forcer la désactivation des décorations
windowrulev2 = suppressevent maximize, class:^(Codium)$
windowrulev2 = suppressevent maximize, class:^(codium)$
windowrulev2 = suppressevent maximize, class:^(VSCodium)$
windowrulev2 = suppressevent maximize, class:^(code)$
windowrulev2 = suppressevent maximize, class:^(Code)$
windowrulev2 = suppressevent maximize, class:^(Windsurf)$
windowrulev2 = suppressevent maximize, class:^(windsurf)$

# VSCodium - Règles spécifiques pour masquer les décorations
windowrulev2 = suppressevent fullscreen, class:^(Codium)$
windowrulev2 = suppressevent fullscreen, class:^(codium)$
windowrulev2 = suppressevent fullscreen, class:^(VSCodium)$

# ═══════════════════════════════════════════════════════════════════════════════
# OPTIMISATIONS ET PERFORMANCE
# ═══════════════════════════════════════════════════════════════════════════════


# Désactive les effets visuels en plein écran pour de meilleures performances
windowrulev2 = noblur, fullscreen:1
windowrulev2 = noshadow, fullscreen:1
windowrulev2 = noborder, fullscreen:1
# ═══════════════════════════════════════════════════════════════════════════════
# ORGANISATION AUTOMATIQUE DES WORKSPACES
# ═══════════════════════════════════════════════════════════════════════════════

# Workspace 3 : Communication générale
windowrulev2 = workspace 3 silent, class:^(discord)$

# Workspace 4 : Musique et multimédia
windowrulev2 = workspace 4 silent, class:^(Spotify)$
windowrulev2 = float, class:^(Spotify)$
windowrulev2 = center, class:^(Spotify)$
windowrulev2 = size 1403 894, class:^(Spotify)$

# Workspace 6 : Concentration Cours (Notes + PDF) - Espace principal pour 90% du cours
windowrulev2 = workspace 6 silent, class:^(obsidian)$

# Workspace 7 : Laboratoire Cours (TP) - Dédié aux travaux pratiques
windowrulev2 = workspace 7 silent, class:^(VirtualBox)$
windowrulev2 = workspace 7 silent, class:^(VirtualBox Machine)$
windowrulev2 = workspace 7 silent, class:^(packettracer)$
windowrulev2 = workspace 7 silent, class:^(PacketTracer)$

# Workspace 8 : Recherche Cours (Web) - Pour les recherches rapides
windowrulev2 = workspace 8 silent, class:^(librewolf)$
windowrulev2 = workspace 8 silent, class:^(brave-browser)$
windowrulev2 = workspace 8 silent, class:^(chromium)$
windowrulev2 = workspace 8 silent, class:^(google-chrome)$
# Applications web spécifiques
windowrulev2 = workspace 8 silent, title:.*Outlook.*
windowrulev2 = workspace 8 silent, title:.*NetYpareo.*

# Workspace 9 : Communication Cours - "Caché" pour les communications de fond
windowrulev2 = workspace 9 silent, class:^(com.github.IsmaelMartinez.teams_for_linux)$



# ═══════════════════════════════════════════════════════════════════════════════
# FENÊTRES FLOTTANTES AUTOMATIQUES
# ═══════════════════════════════════════════════════════════════════════════════

# Gestionnaire de fichiers en mode flottant
windowrulev2 = float, class:^(thunar)$
windowrulev2 = size 900 600, class:^(thunar)$
windowrulev2 = center, class:^(thunar)$

# Waypaper en mode flottant
windowrulev2 = float, class:^(waypaper)$
windowrulev2 = size 900 600, class:^(waypaper)$
windowrulev2 = center, class:^(waypaper)$

# Dialogues de sélection de fichiers GTK (Open/Save)
windowrulev2 = float, title:^(Open File)$
windowrulev2 = float, title:^(Save File)$
windowrulev2 = float, title:^(Save Image)$
windowrulev2 = float, title:^(Open Folder)$
windowrulev2 = float, title:^(Select a File)$
windowrulev2 = float, title:^(Select a Folder)$
windowrulev2 = float, title:^(Choose a file)$
windowrulev2 = float, title:^(Ouvrir un fichier)$
windowrulev2 = float, title:^(Enregistrer sous)$
windowrulev2 = float, title:^(Enregistrer l.image)$
windowrulev2 = float, title:^(Sélectionner un fichier)$
windowrulev2 = size 900 600, title:^(Open File)$
windowrulev2 = size 900 600, title:^(Save File)$
windowrulev2 = size 900 600, title:^(Save Image)$
windowrulev2 = size 900 600, title:^(Open Folder)$
windowrulev2 = size 900 600, title:^(Select a File)$
windowrulev2 = size 900 600, title:^(Select a Folder)$
windowrulev2 = size 900 600, title:^(Choose a file)$
windowrulev2 = size 900 600, title:^(Ouvrir un fichier)$
windowrulev2 = size 900 600, title:^(Enregistrer sous)$
windowrulev2 = size 900 600, title:^(Enregistrer l.image)$
windowrulev2 = size 900 600, title:^(Sélectionner un fichier)$
windowrulev2 = center, title:^(Open File)$
windowrulev2 = center, title:^(Save File)$
windowrulev2 = center, title:^(Save Image)$
windowrulev2 = center, title:^(Open Folder)$
windowrulev2 = center, title:^(Select a File)$
windowrulev2 = center, title:^(Select a Folder)$
windowrulev2 = center, title:^(Choose a file)$
windowrulev2 = center, title:^(Ouvrir un fichier)$
windowrulev2 = center, title:^(Enregistrer sous)$
windowrulev2 = center, title:^(Enregistrer l.image)$
windowrulev2 = center, title:^(Sélectionner un fichier)$
windowrulev2 = noblur, title:^(Open File)$
windowrulev2 = noblur, title:^(Save File)$
windowrulev2 = noblur, title:^(Open Folder)$
windowrulev2 = noblur, title:^(Ouvrir un fichier)$
windowrulev2 = noblur, title:^(Enregistrer sous)$
windowrulev2 = noblur, title:^(Sélectionner un fichier)$
windowrulev2 = noborder, title:^(Open File)$
windowrulev2 = noborder, title:^(Save File)$
windowrulev2 = noborder, title:^(Open Folder)$
windowrulev2 = noborder, title:^(Ouvrir un fichier)$
windowrulev2 = noborder, title:^(Enregistrer sous)$
windowrulev2 = noborder, title:^(Sélectionner un fichier)$

# Applications système en mode flottant
windowrulev2 = float, class:^(pavucontrol)$          # Contrôle du volume
# Zathura - Configuration pour les cours (workspace 6, pas flottant)
# windowrulev2 = float, class:^(zathura)$              # Lecteur PDF - DÉSACTIVÉ pour les cours
windowrulev2 = float, class:^(org.pulseaudio.pavucontrol)$ # Contrôle du volume (classe complète)
windowrulev2 = float, class:^(blueman-manager)$      # Gestionnaire Bluetooth
windowrulev2 = float, class:^(xarchiver)$            # Gestionnaire d'archives
windowrulev2 = float, class:^(nm-connection-editor)$ # Éditeur de connexions réseau
windowrulev2 = float, class:^(zenity)$               # Boîtes de dialogue
windowrulev2 = size 600 450, class:^(zenity)$           # Taille compacte pour zenity
windowrulev2 = center, class:^(zenity)$                 # Centrer zenity

# Sélecteur de fichiers Zenity - Plus compact
windowrulev2 = float, title:^(Sélectionner).*$
windowrulev2 = size 550 400, title:^(Sélectionner).*$
windowrulev2 = center, title:^(Sélectionner).*$
windowrulev2 = float, class:^([Gg]alculator)$        # Calculatrice
windowrulev2 = float, class:^(mousepad)$             # Éditeur de texte
windowrulev2 = float, class:^([Ll]ocal[Ss]end)$      # LocalSend
windowrulev2 = float, class:^(protonvpn-app)$        # Proton VPN
windowrulev2 = float, class:^(Proton Pass)$          # Proton Pass
windowrulev2 = float, class:^(veracrypt)$            # VeraCrypt
windowrulev2 = float, class:^(kvantummanager)$       # Gestionnaire Kvantum
windowrulev2 = float, class:^(org.qbittorrent.qBittorrent)$  # qBittorrent
windowrulev2 = float, class:^(GalaxyBudsClient)$     # Galaxy Buds Manager
windowrulev2 = float, class:.*GalaxyBuds.*           # Galaxy Buds Manager (pattern)
windowrulev2 = float, class:^(dupot_easy_flatpak)$   # Easy Flatpak

# Contrôle du volume compact et centré
windowrulev2 = size 500 400, class:^(pavucontrol)$
windowrulev2 = center, class:^(pavucontrol)$
windowrulev2 = size 500 400, class:^(org.pulseaudio.pavucontrol)$
windowrulev2 = center, class:^(org.pulseaudio.pavucontrol)$
windowrulev2 = opacity 0.95 0.85, class:^(org.pulseaudio.pavucontrol)$
# Règle par titre au cas où la classe ne fonctionne pas
windowrulev2 = size 500 400, title:^(.*[Vv]olume.*)$
windowrulev2 = center, title:^(.*[Vv]olume.*)$
windowrulev2 = float, title:^(.*[Vv]olume.*)$

# Calculatrice compacte et centrée
windowrulev2 = size 350 450, class:^(Galculator)$
windowrulev2 = center, class:^(Galculator)$
windowrulev2 = opacity 0.95 0.85, class:^(Galculator)$

# Éditeur de texte compact et centré
windowrulev2 = size 700 500, class:^(mousepad)$
windowrulev2 = center, class:^(mousepad)$
windowrulev2 = opacity 0.90 0.80, class:^(mousepad)$

# LocalSend compact et centré
windowrulev2 = size 800 600, class:^(Localsend)$
windowrulev2 = center, class:^(Localsend)$
windowrulev2 = opacity 0.95 0.85, class:^(Localsend)$
# Règle par titre pour LocalSend
windowrulev2 = size 800 600, title:^(.*LocalSend.*)$
windowrulev2 = center, title:^(.*LocalSend.*)$
windowrulev2 = float, title:^(.*LocalSend.*)$


# NWG Look compact et centré
windowrulev2 = float, class:^([Nn]wg-look)$
windowrulev2 = size 900 600, class:^([Nn]wg-look)$
windowrulev2 = center, class:^([Nn]wg-look)$
windowrulev2 = opacity 0.95 0.85, class:^([Nn]wg-look)$

# Proton VPN compact et centré
windowrulev2 = size 500 600, class:^(protonvpn-app)$
windowrulev2 = center, class:^(protonvpn-app)$
windowrulev2 = opacity 0.95 0.85, class:^(protonvpn-app)$

# Proton Pass compact et centré
windowrulev2 = size 1403 894, class:^(Proton Pass)$
windowrulev2 = center, class:^(Proton Pass)$
windowrulev2 = opacity 0.75 0.60, class:^(Proton Pass)$

# VeraCrypt compact et centré
windowrulev2 = size 700 500, class:^(veracrypt)$
windowrulev2 = center, class:^(veracrypt)$
windowrulev2 = opacity 0.95 0.85, class:^(veracrypt)$

# Gestionnaire Kvantum compact et centré
windowrulev2 = size 600 500, class:^(kvantummanager)$
windowrulev2 = center, class:^(kvantummanager)$
windowrulev2 = opacity 0.75 0.60, class:^(kvantummanager)$

# qBittorrent compact et centré
windowrulev2 = size 1403 894, class:^(org.qbittorrent.qBittorrent)$
windowrulev2 = center, class:^(org.qbittorrent.qBittorrent)$
windowrulev2 = opacity 0.75 0.60, class:^(org.qbittorrent.qBittorrent)$

# Galaxy Buds Manager compact et centré
windowrulev2 = size 600 500, class:^(GalaxyBudsClient)$
windowrulev2 = center, class:^(GalaxyBudsClient)$
windowrulev2 = opacity 0.95 0.85, class:^(GalaxyBudsClient)$

# Easy Flatpak compact et centré
windowrulev2 = size 700 500, class:^(dupot_easy_flatpak)$
windowrulev2 = center, class:^(dupot_easy_flatpak)$
windowrulev2 = opacity 0.95 0.85, class:^(dupot_easy_flatpak)$

# Zathura (lecteur PDF) - Configuration pour les cours (workspace 6, mode normal)
# windowrulev2 = size 900 700, class:^(zathura)$     # DÉSACTIVÉ pour les cours
# windowrulev2 = center, class:^(zathura)$           # DÉSACTIVÉ pour les cours
windowrulev2 = opacity 0.95 0.90, class:^(zathura)$  # Garde la transparence

# Autres tailles par défaut pour les fenêtres flottantes
windowrulev2 = size 600 400, class:^(blueman-manager)$
windowrulev2 = center, class:^(blueman-manager)$
windowrulev2 = opacity 0.55 0.45, class:^(blueman-manager)$

# ═══════════════════════════════════════════════════════════════════════════════
# RÈGLES GÉNÉRALES POUR LES FENÊTRES FLOATING
# ═══════════════════════════════════════════════════════════════════════════════

# Règle générale pour centrer les fenêtres flottantes (sans forcer la taille)
# (s'applique quand une fenêtre passe en mode floating via togglefloating)
windowrulev2 = center, floating:1
