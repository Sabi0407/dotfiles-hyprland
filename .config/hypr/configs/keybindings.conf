################################################################################
###                         RACCOURCIS CLAVIER                             ###
################################################################################
# Configuration complète des raccourcis clavier et contrôles
# Documentation : https://wiki.hyprland.org/Configuring/Binds/
################################################################################

# ═══════════════════════════════════════════════════════════════════════════════
#  TOUCHE PRINCIPALE ET VARIABLES
# ═══════════════════════════════════════════════════════════════════════════════
$mainMod = SUPER                    # Touche Windows comme modificateur principal

# ═══════════════════════════════════════════════════════════════════════════════
# LANCEMENT D'APPLICATIONS
# ═══════════════════════════════════════════════════════════════════════════════

# Applications principales
bind = $mainMod, RETURN, exec, $terminal        # Terminal principal
bind = $mainMod, E, exec, $fileManager          # Gestionnaire de fichiers
bind = $mainMod, TAB, exec, tofi-drun           # Tofi - Lanceur moderne

# Navigateurs web
bind = $mainMod, B, exec, firefox               # Firefox
bind = $mainMod SHIFT, B, exec, brave-browser --incognito  # Brave en mode privé

# Applications spécialisées
bind = SUPER, O, exec, obsidian                 # Obsidian
bind = SUPER, Z, exec, zathura                  # Zathura
bind = $mainMod, M, exec, ~/.config/Scripts/mpv-file-selector.sh  # Sélecteur vidéo MPV

# ═══════════════════════════════════════════════════════════════════════════════
# ACTIONS SYSTÈME
# ═══════════════════════════════════════════════════════════════════════════════

bind = $mainMod, X, killactive,                 # Fermer la fenêtre active
bind = $mainMod SHIFT, L, exit,                 # Quitter Hyprland
bind = $mainMod, V, togglefloating              # Basculer entre flottant/tiling
bind = $mainMod, F, fullscreen, 3               # Plein écran 
bind = $mainMod, D, exec, ~/.config/Scripts/toggle_show_desktop.sh  # Masquer/Afficher toutes les fenêtres
bind = $mainMod SHIFT, C, exec, hyprctl reload  # Recharger la config

# Système et notifications
bind = SUPER, L, exec, ~/.config/Scripts/auto-backlight.sh lock; hyprlock  # Verrouillage de session
bind = $mainMod, N, exec, swaync-client -t      # Centre de notifications

# Redémarrage/Arrêt système
bind = $mainMod CTRL SHIFT, R, exec, systemctl reboot
bind = $mainMod CTRL SHIFT, O, exec, systemctl poweroff

# ═══════════════════════════════════════════════════════════════════════════════
# LAYOUTS & FENÊTRES
# ═══════════════════════════════════════════════════════════════════════════════

bind = $mainMod, P, pseudo,                     # Activer pseudo-tiling (taille fixe, non redimensionnée)
bind = $mainMod, J, togglesplit,                # Basculer entre split vertical / horizontal
bind = $mainMod ALT, RETURN, layoutmsg, equalize  # Égaliser les tailles de fenêtres

# ═══════════════════════════════════════════════════════════════════════════════
# NAVIGATION ENTRE FENÊTRES
# ═══════════════════════════════════════════════════════════════════════════════

# Déplacer le focus avec mainMod + flèches
bind = $mainMod, left, movefocus, l             # Focus gauche
bind = $mainMod, right, movefocus, r            # Focus droite
bind = $mainMod, up, movefocus, u               # Focus haut
bind = $mainMod, down, movefocus, d             # Focus bas

# Déplacer une fenêtre/groupe avec mainMod + Shift + flèches
bind = $mainMod SHIFT, left, movewindoworgroup, l
bind = $mainMod SHIFT, right, movewindoworgroup, r
bind = $mainMod SHIFT, up, movewindoworgroup, u
bind = $mainMod SHIFT, down, movewindoworgroup, d

# Déplacer les fenêtres avec mainMod + Alt + flèches
bind = $mainMod ALT, right, movewindow, r       # Déplacer fenêtre vers la droite
bind = $mainMod ALT, left,  movewindow, l       # Déplacer fenêtre vers la gauche
bind = $mainMod ALT, up,    movewindow, u       # Déplacer fenêtre vers le haut
bind = $mainMod ALT, down,  movewindow, d       # Déplacer fenêtre vers le bas

# ═══════════════════════════════════════════════════════════════════════════════
# REDIMENSIONNEMENT DES FENÊTRES
# ═══════════════════════════════════════════════════════════════════════════════

# Redimensionnement avec Super + Ctrl + flèches
bind = $mainMod CTRL, Right, resizeactive, 50 0
bind = $mainMod CTRL, Left, resizeactive, -50 0
bind = $mainMod CTRL, Up, resizeactive, 0 -50
bind = $mainMod CTRL, Down, resizeactive, 0 50

# Redimensionnement avec molette + Super (vertical)
binde = $mainMod, mouse_down, resizeactive, 0 10
binde = $mainMod, mouse_up, resizeactive, 0 -10

# Redimensionnement avec molette + Alt (horizontal)
binde = ALT, mouse_down, resizeactive, 10 0
binde = ALT, mouse_up, resizeactive, -10 0

# ═══════════════════════════════════════════════════════════════════════════════
# WORKSPACES & ORGANISATION
# ═══════════════════════════════════════════════════════════════════════════════

# Aller directement à un workspace (1 → 10)
bind = $mainMod, code:10, workspace, 1 
bind = $mainMod, code:11, workspace, 2 
bind = $mainMod, code:12, workspace, 3 
bind = $mainMod, code:13, workspace, 4 
bind = $mainMod, code:14, workspace, 5 
bind = $mainMod, code:15, workspace, 6 
bind = $mainMod, code:16, workspace, 7 
bind = $mainMod, code:17, workspace, 8 
bind = $mainMod, code:18, workspace, 9 
bind = $mainMod, code:19, workspace, 10 

# Déplacer une fenêtre vers un workspace (1 → 10)
bind = $mainMod SHIFT, code:10, movetoworkspace, 1
bind = $mainMod SHIFT, code:11, movetoworkspace, 2
bind = $mainMod SHIFT, code:12, movetoworkspace, 3
bind = $mainMod SHIFT, code:13, movetoworkspace, 4
bind = $mainMod SHIFT, code:14, movetoworkspace, 5
bind = $mainMod SHIFT, code:15, movetoworkspace, 6
bind = $mainMod SHIFT, code:16, movetoworkspace, 7
bind = $mainMod SHIFT, code:17, movetoworkspace, 8
bind = $mainMod SHIFT, code:18, movetoworkspace, 9
bind = $mainMod SHIFT, code:19, movetoworkspace, 10

# Changer de workspace avec la molette + Shift
bind = $mainMod SHIFT, mouse_down, workspace, e+1   # Aller au workspace suivant
bind = $mainMod SHIFT, mouse_up, workspace, e-1     # Aller au workspace précédent

# ═══════════════════════════════════════════════════════════════════════════════
# SOURIS & FENÊTRES
# ═══════════════════════════════════════════════════════════════════════════════

bindm = $mainMod, mouse:272, movewindow        # Déplacer une fenêtre à la souris (clic gauche)
bindm = $mainMod, mouse:273, resizewindow      # Redimensionner une fenêtre à la souris (clic droit)

# ═══════════════════════════════════════════════════════════════════════════════
# CAPTURES D'ÉCRAN
# ═══════════════════════════════════════════════════════════════════════════════

bind = $mainMod, T, exec, grim -g "$(slurp)" - | wl-copy  # Copier une capture dans le presse-papier
bind = $mainMod, S, exec, flameshot gui                    # Flameshot GUI
bind = $mainMod SHIFT, T, exec, ~/.config/Scripts/capture-note.sh  # Capture vers ~/Notes/Images
bind = $mainMod, F11, exec, ~/.config/Scripts/wf-recorder-wrapper.sh full --audio  # Enregistrer écran complet
bind = $mainMod, F12, exec, ~/.config/Scripts/wf-recorder-wrapper.sh zone --audio  # Enregistrer une zone

# ═══════════════════════════════════════════════════════════════════════════════
# FONDS D'ÉCRAN
# ═══════════════════════════════════════════════════════════════════════════════

bind = $mainMod, W, exec, ~/.config/Scripts/random_wallpapers.sh   # Wallpaper aléatoire
bind = $mainMod CTRL, W, exec, ~/.config/Scripts/rofi_wallpaper.sh # Sélecteur de wallpaper avec rofi
bind = $mainMod ALT, W, exec, ~/.config/Scripts/waypaper_wallpaper.sh # Waypaper GUI

# ═══════════════════════════════════════════════════════════════════════════════
# MULTIMÉDIA & LUMINOSITÉ
# ═══════════════════════════════════════════════════════════════════════════════

# Touches multimédia standard
bindel = , XF86AudioRaiseVolume, exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+   # Augmenter volume
bindel = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-        # Diminuer volume
bindel = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle              # Mute son
bindel = , XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle         # Mute micro
bindel = , XF86MonBrightnessUp, exec, brightnessctl -e4 -n2 set 5%+                     # Luminosité +
bindel = , XF86MonBrightnessDown, exec, brightnessctl -e4 -n2 set 5%-                   # Luminosité -

# Raccourcis personnalisés touches F
bindel = , F1, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle                         # F1: Mute son
bindel = , F2, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-                          # F2: Volume -
bindel = , F3, exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+                     # F3: Volume +
bindel = , F4, exec, brightnessctl -e4 -n2 set 5%-                                      # F4: Luminosité -
bindel = , F5, exec, brightnessctl -e4 -n2 set 5%+                                      # F5: Luminosité +
bindel = , F9, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle                       # F9: Mute micro

# Raccourcis avec Super pour forcer le fonctionnement
bindel = $mainMod, F1, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle                 # Super+F1: Mute
bindel = $mainMod, F2, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-                  # Super+F2: Volume -
bindel = $mainMod, F3, exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+             # Super+F3: Volume +
bindel = $mainMod, F5, exec, brightnessctl -e4 -n2 set 5%-                              # Super+F5: Luminosité -
bindel = $mainMod, F6, exec, brightnessctl -e4 -n2 set 5%+                              # Super+F6: Luminosité +

# Rétroéclairage clavier
bindel = , XF86KbdBrightnessUp, exec, ~/.config/Scripts/auto-backlight.sh up          # Rétroéclairage +
bindel = , XF86KbdBrightnessDown, exec, ~/.config/Scripts/auto-backlight.sh down      # Rétroéclairage -
bind = $mainMod, SPACE, exec, ~/.config/Scripts/auto-backlight.sh toggle              # Toggle rétroéclairage

# Profil d'alimentation
bind = $mainMod SHIFT, P, exec, ~/.config/Scripts/power-profile-selector.sh           # Sélecteur profil d'alimentation

# ═══════════════════════════════════════════════════════════════════════════════
# CONTRÔLE LECTEUR
# ═══════════════════════════════════════════════════════════════════════════════

bindl = , XF86AudioNext, exec, playerctl next       # Piste suivante
bindl = , XF86AudioPause, exec, playerctl play-pause # Pause/lecture
bindl = , XF86AudioPlay, exec, playerctl play-pause  # Lecture/Pause
bindl = , XF86AudioPrev, exec, playerctl previous    # Piste précédente

# ═══════════════════════════════════════════════════════════════════════════════
# NAVIGATION WEB/APPS
# ═══════════════════════════════════════════════════════════════════════════════

bind = $mainMod, Y, exec, brave http://localhost:8384/      # Ouvrir interface Syncthing

# ═══════════════════════════════════════════════════════════════════════════════
# ZOOM CURSEUR
# ═══════════════════════════════════════════════════════════════════════════════

# Zoom +
binde = $mainMod, equal, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor | awk '/^float.*/ {print $2 * 1.1}')
binde = $mainMod, KP_ADD, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor | awk '/^float.*/ {print $2 * 1.1}')

# Zoom -
binde = $mainMod, minus, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor | awk '/^float.*/ {print $2 * 0.9}')
binde = $mainMod, KP_SUBTRACT, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor | awk '/^float.*/ {print $2 * 0.9}')

# Zoom via molette + Ctrl + Alt
bind = $mainMod CTRL ALT, mouse_down, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor | awk '/^float.*/ {print $2 * 1.1}')
bind = $mainMod CTRL ALT, mouse_up, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor | awk '/^float.*/ {print $2 * 0.9}')

# Zoom via molette + Ctrl (comme navigateurs)
bind = CTRL, mouse_down, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor | awk '/^float.*/ {print $2 * 1.1}')
bind = CTRL, mouse_up, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor | awk '/^float.*/ {print $2 * 0.9}')

# Réinitialiser zoom
bind = $mainMod SHIFT, mouse_up, exec, hyprctl -q keyword cursor:zoom_factor 1
bind = $mainMod SHIFT, mouse_down, exec, hyprctl -q keyword cursor:zoom_factor 1
bind = $mainMod SHIFT, minus, exec, hyprctl -q keyword cursor:zoom_factor 1
bind = $mainMod SHIFT, KP_SUBTRACT, exec, hyprctl -q keyword cursor:zoom_factor 1
bind = $mainMod SHIFT, 0, exec, hyprctl -q keyword cursor:zoom_factor 1
bind = $mainMod SHIFT, KP_0, exec, hyprctl -q keyword cursor:zoom_factor 1
