################################################################################
###                         RACCOURCIS CLAVIER                             ###
################################################################################
# Configuration complète des raccourcis clavier et contrôles
# Documentation : https://wiki.hyprland.org/Configuring/Binds/
################################################################################

# ═══════════════════════════════════════════════════════════════════════════════
#  TOUCHE PRINCIPALE ET VARIABLES
# ═══════════════════════════════════════════════════════════════════════════════
$mainMod = SUPER                    # Touche Windows comme modificateur principal

# ═══════════════════════════════════════════════════════════════════════════════
# LANCEMENT D'APPLICATIONS
# ═══════════════════════════════════════════════════════════════════════════════

# Applications principales
bind = $mainMod, RETURN, exec, $terminal        # Terminal principal
bind = $mainMod, E, exec, $fileManager          # Gestionnaire de fichiers
bind = $mainMod, TAB, exec, $menu               # Menu d'applications

# ═══════════════════════════════════════════════════════════════════════════════
# CONTRÔLES SPOTIFY
# ═══════════════════════════════════════════════════════════════════════════════
bind = , XF86AudioPlay, exec, ~/.config/hypr/scripts/spotify-controls.sh play-pause
bind = , XF86AudioNext, exec, ~/.config/hypr/scripts/spotify-controls.sh next
bind = , XF86AudioPrev, exec, ~/.config/hypr/scripts/spotify-controls.sh previous
bind = $mainMod, P, exec, ~/.config/hypr/scripts/spotify-controls.sh toggle
bind = $mainMod, bracketright, exec, ~/.config/hypr/scripts/spotify-controls.sh next
bind = $mainMod, bracketleft, exec, ~/.config/hypr/scripts/spotify-controls.sh previous
bind = $mainMod SHIFT, S, exec, ~/.config/hypr/scripts/spotify-widget.sh

# Contrôles média depuis Hyprlock
bind = , F2, exec, ~/.config/hypr/scripts/spotify-controls.sh toggle
bind = $mainMod, D, exec, $menu                 # Menu (raccourci standard)

# Navigateurs web
bind = $mainMod, B, exec, firefox               # Firefox
bind = $mainMod SHIFT, B, exec, brave-browser --incognito  # Brave en mode privé

# Système et notifications
bind = $mainMod, L, exec, hyprlock              # Verrouillage de session
bind = $mainMod, N, exec, swaync-client -t      # Centre de notifications

# Multimédia
bind = $mainMod, M, exec, sh -c 'file=$(zenity --file-selection --title="Choisir une vidéo"); [ -n "$file" ] && mpv "$file"'  # Lecteur vidéo avec sélection

# Outils réseau
bind = $mainMod SHIFT, N, exec, ~/.config/Scripts/nm_applet_priority.sh # Redémarrer l'applet réseau

######################
### ACTIONS SYSTÈME ###
######################

bind = $mainMod, X, killactive,                 # Fermer la fenêtre active
bind = $mainMod SHIFT, L, exit,                 # Quitter Hyprland
bind = $mainMod, V, togglefloating,             # Basculer entre flottant/tiling
bind = $mainMod, F, fullscreenstate,3           # Plein écran forcé
bind = $mainMod SHIFT, F, fullscreen, 1         # Plein écran normal
bind = $mainMod CTRL SHIFT, R, exec, systemctl reboot
bind = $mainMod CTRL SHIFT, O, exec, systemctl poweroff

# Raccourcis supplémentaires utiles
bind = $mainMod, C, exec, hyprctl dispatch pin            # Épingler/désépingler la fenêtre
bind = $mainMod SHIFT, C, exec, hyprctl reload           # Recharger la config



###################
### LAYOUTS ###
###################

bind = $mainMod, P, pseudo,                     # Activer pseudo-tiling (taille fixe, non redimensionnée)
bind = $mainMod, J, togglesplit,                # Basculer entre split vertical / horizontal

############################
### CAPTURES D'ÉCRAN ###
############################

#bind = , PRINT, exec, grim -g "$(slurp)" - | swappy -f - -o ~/Images/Screenshot/screenshot_$(date +%Y%m%d_%H%M%S).png # Capture d'une zone
#bind = $mainMod, PRINT, exec, grim - | swappy -f - -o ~/Images/Screenshot/screenshot_$(date +%Y%m%d_%H%M%S).png       # Capture de l'écran entier
#bind = SHIFT, PRINT, exec, grim -g "$(slurp -w 0)" - | swappy -f - -o ~/Images/Screenshot/screenshot_$(date +%Y%m%d_%H%M%S).png # Capture sans bordures
bind = $mainMod, T, exec, grim -g "$(slurp)" - | wl-copy  # Copier une capture dans le presse-papier
bind = $mainMod, S, exec, flameshot gui
bind = $mainMod CTRL, W, exec, ~/.config/Scripts/rofi_wallpaper.sh  # Changer de fond d'écran avec Rofi
##########################################
### NAVIGATION ENTRE FENÊTRES & GROUPES ###
##########################################

# Déplacer le focus avec mainMod + flèches
bind = $mainMod, left, movefocus, l   # Focus gauche
bind = $mainMod, right, movefocus, r  # Focus droite
bind = $mainMod, up, movefocus, u     # Focus haut
bind = $mainMod, down, movefocus, d   # Focus bas

# Déplacer une fenêtre/groupe avec mainMod + Shift + flèches
bind = $mainMod SHIFT, left, movewindoworgroup, l
bind = $mainMod SHIFT, right, movewindoworgroup, r
bind = $mainMod SHIFT, up, movewindoworgroup, u
bind = $mainMod SHIFT, down, movewindoworgroup, d

###################################
### WORKSPACES & ORGANISATION ###
###################################

# Vue d'ensemble des workspaces avec hyprexpo
bind = $mainMod, Space, exec, hyprctl dispatch hyprexpo:expo toggle # Activer/désactiver la vue d'ensemble (espace)

# Naviguer entre workspaces avec mainMod + Alt + gauche/droite
bind = $mainMod ALT, right, workspace, r+1   # Workspace suivant
bind = $mainMod ALT, left,  workspace, r-1   # Workspace précédent

# Déplacer la fenêtre vers un autre workspace avec mainMod + Alt + haut/bas
bind = $mainMod ALT, up,   movetoworkspace, r+1   # Envoyer fenêtre vers workspace suivant
bind = $mainMod ALT, down, movetoworkspace, r-1   # Envoyer fenêtre vers workspace précédent

# Égaliser les tailles de fenêtres
bind = $mainMod ALT, RETURN, layoutmsg, equalize

# Aller directement à un workspace (1 → 10)
bind = $mainMod, code:10, workspace, 1 
bind = $mainMod, code:11, workspace, 2 
bind = $mainMod, code:12, workspace, 3 
bind = $mainMod, code:13, workspace, 4 
bind = $mainMod, code:14, workspace, 5 
bind = $mainMod, code:15, workspace, 6 
bind = $mainMod, code:16, workspace, 7 
bind = $mainMod, code:17, workspace, 8 
bind = $mainMod, code:18, workspace, 9 
bind = $mainMod, code:19, workspace, 10 

# Déplacer une fenêtre vers un workspace (1 → 10)
bind = $mainMod SHIFT, code:10, movetoworkspace, 1
bind = $mainMod SHIFT, code:11, movetoworkspace, 2
bind = $mainMod SHIFT, code:12, movetoworkspace, 3
bind = $mainMod SHIFT, code:13, movetoworkspace, 4
bind = $mainMod SHIFT, code:14, movetoworkspace, 5
bind = $mainMod SHIFT, code:15, movetoworkspace, 6
bind = $mainMod SHIFT, code:16, movetoworkspace, 7
bind = $mainMod SHIFT, code:17, movetoworkspace, 8
bind = $mainMod SHIFT, code:18, movetoworkspace, 9
bind = $mainMod SHIFT, code:19, movetoworkspace, 10

# Workspace spécial "scratchpad"
#bind = $mainMod, S, togglespecialworkspace, magic         # Ouvrir le scratchpad
#bind = $mainMod SHIFT, S, movetoworkspace, special:magic  # Envoyer une fenêtre au scratchpad

# Changer de workspace avec la molette
bind = $mainMod, mouse_down, workspace, e+1   # Aller au workspace suivant
bind = $mainMod, mouse_up, workspace, e-1     # Aller au workspace précédent

##########################
### SOURIS & FENÊTRES ###
##########################

bindm = $mainMod, mouse:272, movewindow        # Déplacer une fenêtre à la souris (clic gauche)
bindm = $mainMod, mouse:273, resizewindow      # Redimensionner une fenêtre à la souris (clic droit)

###########################
### FONDS D'ÉCRAN ###
###########################

bind = $mainMod, W, exec, ~/.config/Scripts/random_wallpapers.sh   # Wallpaper aléatoire
bind = $mainMod SHIFT, W, exec, ~/.config/Scripts/waypaper_with_pywal.sh # Waypaper avec pywal
bind = $mainMod CTRL, W, exec, ~/.config/Scripts/rofi_wallpaper_modern.sh # Rofi moderne (backup)

###############################
### MULTIMÉDIA & LUMINOSITÉ ###
###############################

bindel = , XF86AudioRaiseVolume, exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+   # Augmenter volume
bindel = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-        # Diminuer volume
bindel = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle              # Mute son
bindel = , XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle         # Mute micro
bindel = , XF86MonBrightnessUp, exec, brightnessctl -e4 -n2 set 5%+                     # Luminosité +
bindel = , XF86MonBrightnessDown, exec, brightnessctl -e4 -n2 set 5%-                   # Luminosité -

# Rétroéclairage clavier ASUS
bindel = , XF86KbdBrightnessUp, exec, ~/.config/waybar/scripts/keyboard_backlight.sh up   # Rétroéclairage +
bindel = , XF86KbdBrightnessDown, exec, ~/.config/waybar/scripts/keyboard_backlight.sh down # Rétroéclairage -
bind = $mainMod, K, exec, ~/.config/waybar/scripts/keyboard_backlight.sh toggle           # Toggle rétroéclairage

##########################
### CONTROLE LECTEUR ###
##########################

bindl = , XF86AudioNext, exec, playerctl next       # Piste suivante
bindl = , XF86AudioPause, exec, playerctl play-pause # Pause/lecture
bindl = , XF86AudioPlay, exec, playerctl play-pause  # Lecture/Pause
bindl = , XF86AudioPrev, exec, playerctl previous    # Piste précédente

##########################
### NAVIGATION WEB/APPS ###
##########################

bind = $mainMod SHIFT, N, exec, brave-browser --incognito   # Brave en navigation privée
bind = $mainMod, Y, exec, brave http://localhost:8384/      # Ouvrir interface Syncthing

######################
### ENREGISTREMENT ###
######################

bind = $mainMod, R, exec, ~/.config/Scripts/record_start.sh  # Démarrer wf-recorder
bind = $mainMod SHIFT, R, exec, ~/.config/Scripts/record_stop.sh # Stopper wf-recorder

#############################
### ZOOM CURSEUR (Hyprctl) ###
#############################

# Zoom +
binde = $mainMod, equal, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor | awk '/^float.*/ {print $2 * 1.1}')
binde = $mainMod, KP_ADD, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor | awk '/^float.*/ {print $2 * 1.1}')

# Zoom -
binde = $mainMod, minus, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor | awk '/^float.*/ {print $2 * 0.9}')
binde = $mainMod, KP_SUBTRACT, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor | awk '/^float.*/ {print $2 * 0.9}')

# Zoom via molette
bind = $mainMod ALT, mouse_down, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor | awk '/^float.*/ {print $2 * 1.1}')
bind = $mainMod ALT, mouse_up, exec, hyprctl -q keyword cursor:zoom_factor $(hyprctl getoption cursor:zoom_factor | awk '/^float.*/ {print $2 * 0.9}')

# Réinitialiser zoom
bind = $mainMod SHIFT, mouse_up, exec, hyprctl -q keyword cursor:zoom_factor 1
bind = $mainMod SHIFT, mouse_down, exec, hyprctl -q keyword cursor:zoom_factor 1
bind = $mainMod SHIFT, minus, exec, hyprctl -q keyword cursor:zoom_factor 1
bind = $mainMod SHIFT, KP_SUBTRACT, exec, hyprctl -q keyword cursor:zoom_factor 1
bind = $mainMod SHIFT, 0, exec, hyprctl -q keyword cursor:zoom_factor 1
bind = $mainMod SHIFT, KP_0, exec, hyprctl -q keyword cursor:zoom_factor 1


##