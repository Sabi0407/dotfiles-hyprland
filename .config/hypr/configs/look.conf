################################################################################
###                         APPARENCE VISUELLE                              ###
################################################################################
# Configuration de l'apparence : décorations, animations, effets visuels
# Documentation : https://wiki.hyprland.org/Configuring/Variables/
################################################################################

# ═══════════════════════════════════════════════════════════════════════════════
#  DÉCORATIONS DES FENÊTRES
# ═══════════════════════════════════════════════════════════════════════════════
decoration {
    # Coins arrondis pour un look moderne
    rounding = 12
      
    # Gestion de la transparence (plus fluide)
    active_opacity = 1.0      # Fenêtres actives : opaque
    inactive_opacity = 1.0    # Fenêtres inactives : opaque
    
    # Transition de transparence fluide
    dim_inactive = false      # Assombrit les fenêtres inactives
    dim_strength = 0.0        # Force de l'assombrissement
    
    # Configuration des ombres (plus dramatiques)
    shadow {
        enabled = false              # Désactive l'ombre noire autour des fenêtres
        range = 8                    # Valeur plus douce si on les réactive
        render_power = 2             # Ombre légère, moins de halo noir
        color = rgba(0f060fcc)       # Teinte alignée sur le thème sombre
    }
    
    # Effets de flou pour les fenêtres transparentes (plus sophistiqué)
    blur {
        enabled = true
        size = 16                    # Flou plus profond, masque mieux le wallpaper
        passes = 3                   # Passe supplémentaire pour densifier l'effet
        vibrancy = 0.28              # Couleurs légèrement atténuées
        noise = 0.01                 # Un peu plus de bruit pour casser la transparence
        contrast = 0.88              # Contraste réduit → moins de fond visible
        brightness = 0.78            # Assombrit légèrement les zones floutées
        new_optimizations = true
        popups = false               # On garde Waybar/wlogout nets
        popups_ignorealpha = 0.05    # Ignore très peu d'alpha → opacité renforcée
    }
}

# ═══════════════════════════════════════════════════════════════════════════════
#  ANIMATIONS FLUIDES ET OPTIMISÉES
# ═══════════════════════════════════════════════════════════════════════════════

# Courbes de Bézier utiles (reste épuré pour la lecture)
bezier = myBezier, 0.10, 0.9, 0.2, 1.05      # Douce ouverture
bezier = over_shoot, 0.05, 0.9, 0.1, 1.05    # Overshoot léger
bezier = smooth_in, 0.60, 0.0, 1.0, 1.0      # Entrée douce
bezier = smooth_out, 0.0, 0.0, 0.4, 1.0      # Sortie douce
bezier = smooth_step, 0.25, 0.1, 0.25, 1.0   # Transition step
bezier = bounce, 0.68, -0.55, 0.265, 1.55    # Effet rebond
bezier = elastic, 0.68, -0.6, 0.32, 1.6      # Effet élastique

animations {
    enabled = 1
    
    # Animations d'ouverture/fermeture des fenêtres (effets originaux et fluides)
    animation = windows, 1, 4, myBezier
    animation = windowsOut, 1, 4, smooth_out
    animation = windowsMove, 1, 3, smooth_step
    
    # Animation de changement d'espace de travail (rapide et fluide)
    animation = workspaces, 1, 4, smooth_out
    animation = specialWorkspace, 1, 3, bounce
    
    # Animations des bordures et effets (transitions rapides)
    animation = border,      1, 2, over_shoot
    animation = borderangle, 1, 3, over_shoot
    animation = fade,        1, 3, smooth_in
    animation = fadeDim,     1, 4, smooth_out
    animation = layers, 1, 4, elastic
}

# ═══════════════════════════════════════════════════════════════════════════════
#  PARAMÈTRES GÉNÉRAUX ET OPTIMISATIONS
# ═══════════════════════════════════════════════════════════════════════════════
misc {
    # Désactive le fond d'écran par défaut de Hyprland
    force_default_wallpaper = 0
    
    # Masque le logo animé au démarrage
    disable_hyprland_logo = true
}

# ═══════════════════════════════════════════════════════════════════════════════
#  CONFIGURATION DU LAYOUT DWINDLE (TILING AUTOMATIQUE)
# ═══════════════════════════════════════════════════════════════════════════════
dwindle {
    pseudotile = true              # Permet le redimensionnement sans quitter le tiling
    preserve_split = true          # Conserve la division après fermeture d'une fenêtre
    smart_split = false            # Division manuelle (pas automatique)
    smart_resizing = true          # Redimensionnement intelligent
    force_split = 2                # Force la direction de division
}

# ═══════════════════════════════════════════════════════════════════════════════
# CONFIGURATION DU LAYOUT MASTER (FENÊTRE PRINCIPALE)
# ═══════════════════════════════════════════════════════════════════════════════
master {
    new_status = master            # Nouvelles fenêtres s'ouvrent comme master
    orientation = left             # Master à gauche, autres à droite
    mfact = 0.55                   # 55% de l'espace pour la fenêtre master
}

# ═══════════════════════════════════════════════════════════════════════════════
# CONFIGURATION GÉNÉRALE (GAPS, BORDURES, COULEURS)
# ═══════════════════════════════════════════════════════════════════════════════

# Couleurs générées automatiquement par pywal
# Généré le sam. 06 déc. 2025 17:46:22 CET
# Wallpaper source: /home/sabi/Images/wallpapers/mountain-snow-minima.jpg

general {
    gaps_in = 5
    gaps_out = 10
    border_size = 3
    
    # Dégradé simple : côté primaire vers côté secondaire
    col.active_border = rgba(32,29,45,1.0) rgba(78,91,114,1.0) 45deg
    col.inactive_border = rgba(15,6,15,0.8)
    
    resize_on_border = false
    allow_tearing = false
    layout = dwindle
}
