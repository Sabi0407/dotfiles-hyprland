general {
    lock_cmd         = pidof hyprlock || /usr/bin/hyprlock
    before_sleep_cmd = /usr/bin/loginctl lock-session
    after_sleep_cmd  = /usr/bin/hyprctl dispatch dpms on
}

listener {
    timeout    = 300
    # Verrouille après 3 minutes
    on-timeout = /usr/bin/hyprlock
    on-resume  = /usr/bin/hyprctl dispatch dpms on
}

listener {
    timeout    = 10
    # Éteint le rétroéclairage clavier après 10 secondes d'inactivité (entre 18h et 4h)
    on-timeout = /home/sabi/.config/Scripts/auto-backlight.sh maybe_off
    on-resume  = /home/sabi/.config/Scripts/auto-backlight.sh restore
    on-movement = /home/sabi/.config/Scripts/auto-backlight.sh restore
}

listener {
    timeout    = 360
    # Éteint l'écran 6 min après le verrouillage
    on-timeout = bash -lc 'pidof hyprlock >/dev/null && /usr/bin/hyprctl dispatch dpms off'
    on-resume  = /usr/bin/hyprctl dispatch dpms on
}
